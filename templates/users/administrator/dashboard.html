{% extends './_base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Dashboard - LMS Admin" %}{% endblock %}

{% block extra_css %}
{% endblock %}

{% block content %}
<div class="dashboard-specific-class">
    <header class="gradient-bg text-white p-6 rounded-xl mb-4 card-shadow">
        <h1 class="text-4xl font-bold text-center mb-2">{% trans "LMS Admin Dashboard" %}</h1>
        <p class="text-center text-lg">{% trans "Empowering Education, Enriching Minds" %}</p>
    </header>

    <nav class="flex mb-4" aria-label="Breadcrumb">
        <ol class="inline-flex items-center space-x-1 md:space-x-3">
            <li class="inline-flex items-center">
                <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                    </svg>
                    <span>{% trans "Dashboard" %}</span>
                </span>
            </li>
        </ol>
    </nav>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
        <!-- Key Metrics -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-xl font-semibold text-primary mb-2">{% trans "Total Users" %}</h3>
            <p class="text-4xl font-bold text-accent">5,234</p>
            <p class="text-sm text-secondary mt-2"><i class="fas fa-arrow-up text-green-500"></i> {% trans "12% from last month" %}</p>
        </div>
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-xl font-semibold text-primary mb-2">{% trans "Active Courses & Programs" %}</h3>
            <p class="text-4xl font-bold text-accent">112</p>
            <p class="text-sm text-secondary mt-2"><i class="fas fa-plus text-blue-500"></i> {% trans "5 new this week" %}</p>
        </div>
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-xl font-semibold text-primary mb-2">{% trans "Completion Rate" %}</h3>
            <p class="text-4xl font-bold text-accent">76%</p>
            <p class="text-sm text-secondary mt-2"><i class="fas fa-arrow-up text-green-500"></i> {% trans "5% from last month" %}</p>
        </div>
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-xl font-semibold text-primary mb-2">{% trans "New Enrollments" %}</h3>
            <p class="text-4xl font-bold text-accent">328</p>
            <p class="text-sm text-secondary mt-2"><i class="fas fa-arrow-up text-green-500"></i> {% trans "15% from last week" %}</p>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
        <!-- User Activity Chart -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "User Activity" %}</h3>
            <canvas id="userActivityChart"></canvas>
        </div>

        <!-- Course Popularity -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Most Popular Courses" %}</h3>
            <ul class="space-y-4">
                <li class="flex justify-between items-center">
                    <span class="font-semibold">{% trans "Advanced Arabic" %}</span>
                    <span class="bg-accent text-white px-3 py-1 rounded-full text-sm">{% trans "1,234 enrolled" %}</span>
                </li>
                <li class="flex justify-between items-center">
                    <span class="font-semibold">{% trans "Business Management" %}</span>
                    <span class="bg-accent text-white px-3 py-1 rounded-full text-sm">{% trans "987 enrolled" %}</span>
                </li>
                <li class="flex justify-between items-center">
                    <span class="font-semibold">{% trans "Data Science Fundamentals" %}</span>
                    <span class="bg-accent text-white px-3 py-1 rounded-full text-sm">{% trans "856 enrolled" %}</span>
                </li>
                <li class="flex justify-between items-center">
                    <span class="font-semibold">{% trans "Digital Marketing" %}</span>
                    <span class="bg-accent text-white px-3 py-1 rounded-full text-sm">{% trans "743 enrolled" %}</span>
                </li>
                <li class="flex justify-between items-center">
                    <span class="font-semibold">{% trans "Introduction to AI" %}</span>
                    <span class="bg-accent text-white px-3 py-1 rounded-full text-sm">{% trans "621 enrolled" %}</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Recent Activities -->
    <div class="bg-white rounded-xl p-6 mb-8 card-shadow">
        <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Recent Activities" %}</h3>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "User" %}</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Activity" %}</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Course" %}</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">{% trans "Date" %}</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Ahmed Al-Mansour" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Completed course" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Advanced Arabic" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "July 15, 2024" %}</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Fatima Al-Sayed" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Enrolled in course" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Business Management" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "July 14, 2024" %}</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Mohammed Al-Harbi" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Submitted assignment" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Data Science Fundamentals" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "July 13, 2024" %}</td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Noura Al-Qhtani" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Started course" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "Digital Marketing" %}</td>
                        <td class="px-6 py-4 whitespace-nowrap">{% trans "July 12, 2024" %}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- New Sections -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
        <!-- Top Performers -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Top Performers" %}</h3>
            <ul class="space-y-4">
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=1" alt="User" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Layla Al-Farsi" %}</p>
                        <p class="text-sm text-gray-500">{% trans "98% completion rate" %}</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=2" alt="User" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Karim El-Masri" %}</p>
                        <p class="text-sm text-gray-500">{% trans "95% completion rate" %}</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=3" alt="User" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Amira Khalil" %}</p>
                        <p class="text-sm text-gray-500">{% trans "93% completion rate" %}</p>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Upcoming Events -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Upcoming Events" %}</h3>
            <ul class="space-y-4">
                <li>
                    <p class="font-semibold">{% trans "New Course Launch: Advanced Machine Learning" %}</p>
                    <p class="text-sm text-gray-500">{% trans "July 20, 2024" %}</p>
                </li>
                <li>
                    <p class="font-semibold">{% trans "Webinar: Future of E-learning" %}</p>
                    <p class="text-sm text-gray-500">{% trans "July 25, 2024" %}</p>
                </li>
                <li>
                    <p class="font-semibold">{% trans "Summer Coding Bootcamp" %}</p>
                    <p class="text-sm text-gray-500">{% trans "August 1-15, 2024" %}</p>
                </li>
                <li>
                    <p class="font-semibold">{% trans "Virtual Career Fair" %}</p>
                    <p class="text-sm text-gray-500">{% trans "August 20, 2024" %}</p>
                </li>
            </ul>
        </div>

        <!-- New Instructors -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "New Instructors" %}</h3>
            <ul class="space-y-4">
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=4" alt="Instructor" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Dr. Yusuf Al-Qahtani" %}</p>
                        <p class="text-sm text-gray-500">{% trans "Data Science" %}</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=5" alt="Instructor" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Prof. Maryam Al-Saud" %}</p>
                        <p class="text-sm text-gray-500">{% trans "Business Ethics" %}</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <img src="https://i.pravatar.cc/40?img=6" alt="Instructor" class="rounded-full mr-3">
                    <div>
                        <p class="font-semibold">{% trans "Dr. Hassan El-Masry" %}</p>
                        <p class="text-sm text-gray-500">{% trans "Artificial Intelligence" %}</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

   <!-- System Health -->
   <div class="bg-white rounded-xl p-6 card-shadow">
    <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "System Health" %}</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
            <p class="font-semibold">{% trans "Server Uptime" %}</p>
            <p class="text-2xl font-bold text-green-500">99.9%</p>
        </div>
        <div>
            <p class="font-semibold">{% trans "Average Response Time" %}</p>
            <p class="text-2xl font-bold text-blue-500">0.3s</p>
        </div>
        <div>
            <p class="font-semibold">{% trans "Active Sessions" %}</p>
            <p class="text-2xl font-bold text-purple-500">1,234</p>
        </div>
    </div>
</div>

<!-- Additional Dashboard Elements -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
    <!-- Course Completion Rates -->
    <div class="bg-white rounded-xl p-6 card-shadow">
        <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Course Completion Rates" %}</h3>
        <canvas id="courseCompletionChart"></canvas>
    </div>

    <!-- Student Feedback -->
    <div class="bg-white rounded-xl p-6 card-shadow">
        <h3 class="text-2xl font-semibold text-primary mb-4">{% trans "Recent Student Feedback" %}</h3>
        <ul class="space-y-4">
            <li>
                <p class="font-semibold">{% trans "Advanced Arabic" %}</p>
                <div class="flex items-center">
                    <span class="text-yellow-400">★★★★★</span>
                    <span class="ml-2 text-sm text-gray-600">{% trans "Excellent course structure!" %}</span>
                </div>
            </li>
            <li>
                <p class="font-semibold">{% trans "Data Science Fundamentals" %}</p>
                <div class="flex items-center">
                    <span class="text-yellow-400">★★★★☆</span>
                    <span class="ml-2 text-sm text-gray-600">{% trans "Very informative, could use more practical exercises." %}</span>
                </div>
            </li>
            <li>
                <p class="font-semibold">{% trans "Business Management" %}</p>
                <div class="flex items-center">
                    <span class="text-yellow-400">★★★★★</span>
                    <span class="ml-2 text-sm text-gray-600">{% trans "Great insights from real-world scenarios!" %}</span>
                </div>
            </li>
        </ul>
    </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// User Activity Chart
var ctx = document.getElementById('userActivityChart').getContext('2d');
var chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
            label: 'Active Users',
            data: [1200, 1900, 3000, 5000, 4000, 4500],
            backgroundColor: 'rgba(194, 65, 12, 0.2)',
            borderColor: 'rgba(194, 65, 12, 1)',
            borderWidth: 2,
            tension: 0.3
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Course Completion Chart
var completionCtx = document.getElementById('courseCompletionChart').getContext('2d');
var completionChart = new Chart(completionCtx, {
    type: 'bar',
    data: {
        labels: ['Advanced Arabic', 'Business Management', 'Data Science', 'Digital Marketing', 'AI Basics'],
        datasets: [{
            label: 'Completion Rate (%)',
            data: [85, 78, 92, 88, 76],
            backgroundColor: [
                'rgba(255, 99, 132, 0.6)',
                'rgba(54, 162, 235, 0.6)',
                'rgba(255, 206, 86, 0.6)',
                'rgba(75, 192, 192, 0.6)',
                'rgba(153, 102, 255, 0.6)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true,
                max: 100
            }
        }
    }
});
</script>
{% endblock %}

