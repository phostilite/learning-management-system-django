{% extends './_base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "My Progress - LMS Learner" %}{% endblock %}

{% block extra_css %}
<style>
    .card-shadow {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .progress-ring {
        transform: rotate(-90deg);
    }

    .progress-ring__circle {
        transition: stroke-dashoffset 0.35s;
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
    }

    .skill-progress {
        width: 100%;
        height: 8px;
        background-color: #E5E7EB;
        border-radius: 4px;
        overflow: hidden;
    }

    .skill-progress-bar {
        height: 100%;
        border-radius: 4px;
        transition: width 0.5s ease-in-out;
    }

    .course-progress {
        transition: all 0.3s ease;
    }

    .course-progress:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto">
    <header class="mb-6 gradient-bg p-6 rounded-lg shadow-md">
        <h1 class="text-4xl font-bold text-white text-center mb-2">{% trans "My Progress" %}</h1>
        <p class="text-lg text-white text-center">{% trans "Track your learning journey and achievements" %}</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
        <!-- Overall Progress -->
        <div class="bg-white rounded-lg p-6 card-shadow">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Overall Progress" %}</h2>
            <div class="flex items-center justify-center">
                <svg class="progress-ring" width="150" height="150">
                    <circle class="progress-ring__circle" stroke="#E5E7EB" stroke-width="10" fill="transparent" r="65" cx="75" cy="75"/>
                    <circle class="progress-ring__circle" stroke="#4F46E5" stroke-width="10" fill="transparent" r="65" cx="75" cy="75" stroke-dasharray="408.41" stroke-dashoffset="102.10"/>
                </svg>
                <div class="absolute text-center">
                    <p class="text-4xl font-bold text-indigo-600">75%</p>
                    <p class="text-sm text-gray-600">{% trans "Complete" %}</p>
                </div>
            </div>
        </div>

        <!-- Achievements -->
        <div class="bg-white rounded-lg p-6 card-shadow">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Achievements" %}</h2>
            <div class="flex justify-around">
                <div class="text-center">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-2 mx-auto">
                        <i class="fas fa-award text-2xl text-yellow-500"></i>
                    </div>
                    <p class="text-sm font-semibold text-gray-700">3 {% trans "Courses" %}</p>
                    <p class="text-xs text-gray-600">{% trans "Completed" %}</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-2 mx-auto">
                        <i class="fas fa-certificate text-2xl text-green-500"></i>
                    </div>
                    <p class="text-sm font-semibold text-gray-700">2 {% trans "Certificates" %}</p>
                    <p class="text-xs text-gray-600">{% trans "Earned" %}</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-2 mx-auto">
                        <i class="fas fa-clock text-2xl text-blue-500"></i>
                    </div>
                    <p class="text-sm font-semibold text-gray-700">50 {% trans "Hours" %}</p>
                    <p class="text-xs text-gray-600">{% trans "Learning Time" %}</p>
                </div>
            </div>
        </div>

        <!-- Learning Streak -->
        <div class="bg-white rounded-lg p-6 card-shadow">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Learning Streak" %}</h2>
            <div class="flex items-center justify-center">
                <div class="text-center">
                    <p class="text-5xl font-bold text-indigo-600 mb-2">15</p>
                    <p class="text-lg font-semibold text-gray-700">{% trans "Days" %}</p>
                    <p class="text-sm text-gray-600">{% trans "Keep it up!" %}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
        <!-- Course Progress -->
        <div class="lg:col-span-2 bg-white rounded-lg p-6 card-shadow">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Course Progress" %}</h2>
            <div class="space-y-4">
                <div class="course-progress bg-indigo-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">Web Development Fundamentals</h3>
                    <div class="flex items-center">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mr-2">
                            <div class="bg-indigo-600 h-2.5 rounded-full" style="width: 100%"></div>
                        </div>
                        <span class="text-sm font-medium text-gray-700">100%</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">{% trans "Completed" %}</p>
                </div>
                <div class="course-progress bg-blue-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">Data Science Basics</h3>
                    <div class="flex items-center">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mr-2">
                            <div class="bg-blue-600 h-2.5 rounded-full" style="width: 75%"></div>
                        </div>
                        <span class="text-sm font-medium text-gray-700">75%</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">{% trans "In Progress" %}</p>
                </div>
                <div class="course-progress bg-green-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">Mobile App Development</h3>
                    <div class="flex items-center">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mr-2">
                            <div class="bg-green-600 h-2.5 rounded-full" style="width: 50%"></div>
                        </div>
                        <span class="text-sm font-medium text-gray-700">50%</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">{% trans "In Progress" %}</p>
                </div>
            </div>
        </div>

        <!-- Skills Progress -->
        <div class="bg-white rounded-lg p-6 card-shadow">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Skills Progress" %}</h2>
            <div class="space-y-4">
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">HTML/CSS</span>
                        <span class="text-sm font-medium text-gray-700">90%</span>
                    </div>
                    <div class="skill-progress">
                        <div class="skill-progress-bar bg-indigo-600" style="width: 90%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">JavaScript</span>
                        <span class="text-sm font-medium text-gray-700">75%</span>
                    </div>
                    <div class="skill-progress">
                        <div class="skill-progress-bar bg-blue-600" style="width: 75%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Python</span>
                        <span class="text-sm font-medium text-gray-700">60%</span>
                    </div>
                    <div class="skill-progress">
                        <div class="skill-progress-bar bg-green-600" style="width: 60%"></div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Data Analysis</span>
                        <span class="text-sm font-medium text-gray-700">45%</span>
                    </div>
                    <div class="skill-progress">
                        <div class="skill-progress-bar bg-yellow-600" style="width: 45%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learning Path -->
    <div class="bg-white rounded-lg p-6 card-shadow mb-6">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Learning Path" %}</h2>
        <div class="relative">
            <div class="absolute left-1/2 transform -translate-x-1/2 w-1 h-full bg-indigo-200"></div>
            <div class="space-y-8 relative">
                <div class="flex items-center">
                    <div class="z-10 w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center">
                        <i class="fas fa-check text-white"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-semibold text-gray-800">Web Development Fundamentals</h3>
                        <p class="text-sm text-gray-600">{% trans "Completed on" %} {% now "F j, Y" %}</p>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="z-10 w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center">
                        <i class="fas fa-spinner text-white"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-semibold text-gray-800">Data Science Basics</h3>
                        <p class="text-sm text-gray-600">{% trans "In Progress - 75% Complete" %}</p>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="z-10 w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
                        <i class="fas fa-lock text-white"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-semibold text-gray-800">Advanced Machine Learning</h3>
                        <p class="text-sm text-gray-600">{% trans "Locked - Complete prerequisites first" %}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="bg-white rounded-lg p-6 card-shadow">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Recent Activity" %}</h2>
        <ul class="space-y-4">
            <li class="flex items-center">
                <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-4">
                    <i class="fas fa-book text-indigo-600"></i>
                </div>
                <div>
                    <p class="text-gray-800 font-semibold">{% trans "Completed lesson: Introduction to JavaScript" %}</p>
                    <p class="text-sm text-gray-600">2 {% trans "hours ago" %}</p>
                </div>
            </li>
            <li class="flex items-center">
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-4">
                    <i class="fas fa-trophy text-green-600"></i>
                </div>
                <div>
                    <p class="text-gray-800 font-semibold">{% trans "Earned badge: CSS Master" %}</p>
                    <p class="text-sm text-gray-600">1 {% trans "day ago" %}</p>
                </div>
            </li>
            <li class="flex items-center">
                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-4">
                    <i class="fas fa-tasks text-yellow-600"></i>
                </div>
                <div>
                    <p class="text-gray-800 font-semibold">{% trans "Submitted assignment: Data Visualization Project" %}</p>
                    <p class="text-sm text-gray-600">3 {% trans "days ago" %}</p>
            </div>
        </li>
        <li class="flex items-center">
            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                <i class="fas fa-video text-blue-600"></i>
            </div>
            <div>
                <p class="text-gray-800 font-semibold">{% trans "Watched video: Introduction to Machine Learning" %}</p>
                <p class="text-sm text-gray-600">5 {% trans "days ago" %}</p>
            </div>
        </li>
    </ul>
</div>

<!-- Recommendations -->
<div class="mt-6 bg-white rounded-lg p-6 card-shadow">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">{% trans "Recommended Next Steps" %}</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">{% trans "Complete JavaScript Basics" %}</h3>
            <p class="text-sm text-gray-600 mb-4">{% trans "Finish the remaining lessons to solidify your JS skills." %}</p>
            <a href="#" class="text-indigo-600 hover:text-indigo-800 font-medium">{% trans "Continue Course" %} &rarr;</a>
        </div>
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">{% trans "Take Python Assessment" %}</h3>
            <p class="text-sm text-gray-600 mb-4">{% trans "Test your Python knowledge with this quick assessment." %}</p>
            <a href="#" class="text-indigo-600 hover:text-indigo-800 font-medium">{% trans "Start Assessment" %} &rarr;</a>
        </div>
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">{% trans "Explore Data Visualization" %}</h3>
            <p class="text-sm text-gray-600 mb-4">{% trans "Enhance your data science skills with this new course." %}</p>
            <a href="#" class="text-indigo-600 hover:text-indigo-800 font-medium">{% trans "Preview Course" %} &rarr;</a>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set up the circular progress indicator
    function setProgress(percentage) {
        const circle = document.querySelector('.progress-ring__circle:last-child');
        const radius = circle.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        const offset = circumference - (percentage / 100) * circumference;
        circle.style.strokeDasharray = `${circumference} ${circumference}`;
        circle.style.strokeDashoffset = offset;
    }

    setProgress(75); // Set to 75% complete

    // Add hover effect to course progress bars
    const courseProgressBars = document.querySelectorAll('.course-progress');
    courseProgressBars.forEach(bar => {
        bar.addEventListener('mouseenter', function() {
            this.classList.add('shadow-lg');
        });
        bar.addEventListener('mouseleave', function() {
            this.classList.remove('shadow-lg');
        });
    });

    // You can add more interactivity here, such as:
    // - Fetching and updating progress data dynamically
    // - Implementing a calendar view for the learning streak
    // - Adding tooltips to show more details on hover
    // - Creating modal popups for detailed course or skill information
});
</script>
{% endblock %}